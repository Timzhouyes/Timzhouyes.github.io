---
layout:     post   				    # 使用的布局（不需要改）
title:      Java集合初探  		# 标题 
subtitle:           #副标题
date:       2020-04-25		# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - Programming
    - Java
    - Collection
---

还是天问五连：是什么？有什么特点？怎么用？如何实现？有什么要注意的地方？

走！

# 1. Collection

## 2.1 什么是Collection

Java是一门面向对象的语言，那么有的时候我们需要对不止一个对象进行处理，这种情况就需要”集合“，也就是Collection来存放对象。

## 2.2 怎么用？

![image-20200426152818181](../img/image-20200426152818181.png)

可以看出很多方法，比如 size()，contains()，iterator() ,add(),remove() 等等，都是Collection提供的。

![image-20200426153402062](../img/image-20200426153402062.png)

### 2.2.1 retainAll()

最后这个retainAll()平时用的很少，下面是代码示例：

```java
package UseToStudyJavaClass.CollectionStudy;

import java.util.ArrayList;

public class RetainAllTest {
    public static void main(String[] args) {
        ArrayList<Integer> arr1 = new ArrayList<>();
        arr1.add(1);
        arr1.add(2);
        arr1.add(3);

        ArrayList<Integer> arr2 = new ArrayList<>();
        arr2.add(1);
        arr2.add(4);
        arr2.add(5);

        boolean status =arr1.retainAll(arr2);
        System.out.println("Status is "+status);
        for(int i:arr1){
            System.out.println(i);
        }

    }
}

```

结果是：

```java
Status is true
1
```

### 2.2.2 迭代器(iterator)

```java
public interface Collection<E> extends Iterable<E> {
```

基础功能有：

1. size()

   

Collection本身就继承了Iterable这个接口。

```java
public interface Iterable<T> {
    /**
     * Returns an iterator over elements of type {@code T}.
     *
     * @return an Iterator.
     */
    Iterator<T> iterator();
```

而Iterable这个接口之中有一个Iterator,其本身还是一个接口：

![image-20200426154131032](../img/image-20200426154131032.png)

其中第一个方法：

```java
/**
     * Performs the given action for each remaining element until all elements
     * have been processed or the action throws an exception.  Actions are
     * performed in the order of iteration, if that order is specified.
     * Exceptions thrown by the action are relayed to the caller.
     *
     * @implSpec
     * <p>The default implementation behaves as if:
     * <pre>{@code
     *     while (hasNext())
     *         action.accept(next());
     * }</pre>
     *
     * @param action The action to be performed for each element
     * @throws NullPointerException if the specified action is null
     * @since 1.8
     */
    default void forEachRemaining(Consumer<? super E> action) {
        Objects.requireNonNull(action);
        while (hasNext())
            action.accept(next());
    }
```

意思就是把每个元素都过一遍这个叫做action 的 Consumer,，直到过完或者抛出异常。

下面的三个方法我们都无比熟悉了。
按照博主的意思，其是在ArrayList之中的内部类被实现的：看到这个Itr()了没。

![image-20200426154821356](../img/image-20200426154821356.png)

那么这个迭代器怎么用呢？

```java
package UseToStudyJavaClass.CollectionStudy;

import java.util.ArrayList;
import java.util.Iterator;

public class IterableTest {
    public static void main(String[] args) {
        ArrayList<Integer> arr1 = new ArrayList<>();
        arr1.add(1);
        arr1.add(2);
        arr1.add(3);
        
        Iterator i = arr1.iterator();
        while(i.hasNext()){
            System.out.println(i.next());
        }
    }
}
```

由于每个继承了Collection的对象都有iterator(),其返回的就是一个 Iterator，那么就可以按照iterator的三个方法来对ArrayList做操作。

## 2. 有什么要注意

数组和集合的区别：

1. 数组的长度固定，集合的长度可变
2. 数组可以存储基本类型和引用类型(int[] 或者 Integer[])都可以，但是集合只能存储**引用类型**，如果存储的是基本类型，会进行自动装箱操作——从int变成Integer

迭代器为什么不设计成一个类，而是一个接口？

如果设计成一个类，有两种：抽象类和实体类。

如果设计成抽象类，按照java的不可多重继承原则，其就没法去继承其他的类。那么就会出现使用上面的短板。如果写成实体类，即其可以直接实体化成一个对象，那么对于不同种类的Collection，其遍历方法必然不同，也就没法产生这样一个随处可用的实体方法。所以其只能是一个接口。

## 2.3 List简介

Collection之中主要分两种：Set和List。一个无序不重复，一个有序可重复。

### 2.3.1 是什么？有什么特点？

是一个有序可重复的implement Collection接口的接口

### 2.3.2 怎么用？

### 2.3.3 如何实现？

其中对Collection 的 Iterator进行了自己的实现。

![image-20200426160453874](../img/image-20200426160453874.png)

可见主要是多了往前遍历，添加元素和修改元素的操作。

#### 2.3.3.1 常用子类

1. ArrayList: 底层数据结构是数组，线程不安全
2. LinkedList: 底层数据结构是链表，线程不安全
3. Vector: 底层数据结构是数组。线程安全。

## 2.4 Set简介

### 2.4.1 是什么？

是一个不可重复的Collection实现

### 2.4.2 常用子类

1. HashSet: 底层是HashTable
2. TreeSet: 底层红黑树，元素有大小的排序
3. LinkedHashSet: 底层是HashTable+ LinkedList

## 2. List集合精讲

主要讲这三个子类的特别用法和实现：

1. ArrayList: 底层数据结构是数组，线程不安全
2. LinkedList: 底层数据结构是链表，线程不安全
3. Vector: 底层数据结构是数组。线程安全。

## 2.1 List是什么？有什么特点？（略，之前讲过）

## 2.2 ArrayList

