---
layout:     post   				    # 使用的布局（不需要改）
title:     Spring AOP 之中的JDK 和 CGLib 动态代理哪个效率更高				# 标题 
subtitle:   对不同用法的一点比较研究 #副标题
date:       2019-09-26 				# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 编程
    - Java
	- spring
	- AOP
---

无意之间看到了一篇[文章](https://blog.csdn.net/xlgen157387/article/details/82497594#comments)，里面对于Spring AOP 之中 JDK 和 CGLib 二者动态代理哪个效率更高做了测试，于是在自己博客之中记一下笔记，算是兴趣的一点探究。

# 一、基本概念

首先，针对Spring 的两个特点：AOP和ROC之中的AOP，底层实现有两种方式：一种是 JDK 动态代理，一种是 CGLib 的方式。

自从 Java 1.3 开始，Java 提供了动态代理技术，允许在运行期创建接口的代理实例。

> 反射：主要是指程序可以访问，检测和修改它本身状态或行为的一种能力，并能根据自身行为的状态和结果，调整或修改应用所描述行为的状态和相关的语义。

JDK 的动态代理主要涉及 java.lang.reflect 下面的 `Proxy` 和 `InvocationHandler`， 其中`InvocationHandler` 是一个接口，可以通过实现该接口来定义横切逻辑，并通过**反射机制**来调用目标类的代码，这样就可以动态的将**横切逻辑**和**业务逻辑** 编织在一起。

JDK 动态代理有一个限制，就是只可以为 **接口** 产生代理实例，而没有通过接口定义业务方法的类， 要通过 CGLib 来创建动态代理实例。

CGLib(Code Generation Library) 采用底层的字节码技术，其可以为类创建一个子类，在子类之中采用**方法拦截**的技术来拦截所有父类的方法的调用，并且顺势织入横切逻辑。

# 二、 JDK 和 CGLib 动态代理区别

