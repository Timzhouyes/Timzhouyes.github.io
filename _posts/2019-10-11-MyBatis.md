---
layout:     post   				    # 使用的布局（不需要改）
title:      MyBatis 入门				# 标题 
subtitle:   对于XML和annotation的SQL语句做一些梳理和总结  #副标题
date:       2019-10-11 				# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 编程
    - MyBatis

---

高产似母猪之中的母猪……

MyBatis 因为其支持定制化 SQL,存储过程等等,而且避免了几乎所有的JDBC 代码和手动设置参数,以及获取结果集等等这些操作,深受广大被折磨的程序员的欢迎.

由于环境配置已经存在,那么我就直接略过环境配置的环节,直接上干货啦!

# 1. XML 映射文件

官方说明是:由于MyBatis 的映射语句的强大,其映射器的XML 文件变得相对简单,相对于同功能的JDBC 代码,可以发现其省略了将近 95% 的代码. MyBatis 为了聚焦于 SQL 而建,用来尽可能的减少麻烦.

SQL 映射文件只有几个很少的顶级元素.下面是按照其应该被定义的顺序列出:

- Cache: 对给定 **命名空间** 的缓存配置
- Cache-ref : 对其他命名空间的 **缓存配置** 的引用
- resultMap: “最复杂且最强大”, 用来描述如何从 **数据库结果集** 之中加载对象.
- sql: 可被其他语句引用的 **可重用语句块**
- insert: 映射插入语句
- update: 映射更新语句
- delete: 映射删除语句
- select: 映射查询语句

## 1.1 select

查询语句在任何情况之下都是使用最频繁的功能。同样，MyBatis 的基本原则之一，就是将焦点和努力放在查询和结果映射的原因，简单查询的 select 元素是非常简单的，比如：

```xml
<select id="selectPerson" parameterType="int" resultType="hashmap">
	SELECT * FROM PERSON WHERE ID = #{id}
</select>
```

这个语句的意义是：

- 名字被称为 selectPerson
- 接受一个 int 或者 Integer 类型的参数
- 返回一个 HashMap 类型的对象

其中的键是列名，值就是结果行之中的对应值。

注意其参数符号为

```
#{id}
```

这相当于告诉 MyBatis 创建一个有预处理语句(PreparedStatement) 的参数，在 JDBC 之中，这样的一个参数在 SQL 之中就会由一个“？”来表示，并且被传递到一个新的预处理语句之中，类似于这样：

```java
//下面是类似功能的 JDBC 代码，而不是 MyBatis 代码。
String selectPerson = "SELECT * FROM PERSON WHERE ID=?";
PreparedStatement ps = conn.prepareStatement(selectPerson);
ps.setInt(1,id);
```

