---
layout:     post   				    # 使用的布局（不需要改）
title:      CORS相关梳理  		# 标题 
subtitle:   CORS的概念和同源政策相关的梳理，加上AJAX梳理        #副标题
date:       2019-12-13		# 时间
author:     Haiming 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 编程
    - CORS
---

学起来！

阮一峰相关博文：

http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html

https://www.ruanyifeng.com/blog/2016/04/cors.html

# 概述

## 含义

同源政策，最开始是指A网页设置的Cookie，B网页不能打开，除非这两个网页“同源”。所谓的“同源”是指三个相同：

- 协议相同
- 域名相同
- 端口相同

举例来说，`http://www.example.com/dir/page.html`这个网址，协议是`http://`，域名是`www.example.com`，端口是`80`（默认端口可以省略）。它的同源情况如下。

> - `http://www.example.com/dir2/other.html`：同源
> - `http://example.com/dir/other.html`：不同源（域名不同）
> - `http://v2.www.example.com/dir/other.html`：不同源（域名不同）
> - `http://www.example.com:81/dir/other.html`：不同源（端口不同）

## 目的

目的简而言之就是保证用户信息的安全，防止恶意的网站窃取数据。

如果不同的网站之间的Cookie都可以共享，那么会发生很严重的安全问题。例如在Cookie之中放有用户隐私的数据，银行卡密码等等。而且Cookie之中往往存有用户的登录状态，如果用户没有退出登录，那么其他网站就可以冒充该用户进行所有操作。

同源政策同时规定提交表单的情况不属于同源政策。按照我个人的理解，因为提交表单的情况是表单直接发送给另外一个网址，这个过程并不会对本地的Cookie或者其他信息有影响，因此不会收到安全问题。



# AJAX

下面是一些本文章涉及到的教程：

https://javascript.ruanyifeng.com/bom/ajax.html

## 简介

我们都知道，在传统的浏览器之中，采用的HTTP 通信是用户在浏览器之中键入一个网址，或者通过form向服务器发送内容， 这时候浏览器就会向服务器之中发送请求。

后来在1999年，IE 浏览器加入了一个新功能：允许 JavaScript 脚本向服务器发送 HTTP 请求。这个功能在后来的Gmail和Google Map之中引起了广泛重视。 2005 年 2月， AJAX 这个词第一次提出，其是 Ascynchronous JavaScript and XML 的缩写，指的是：通过JavaScript 的异步通信，从服务器之中提取XML来提取数据用来更新当前网页的对应部分， 而不用刷新整个网页。后来，AJAX 就成为了使用 JavaScript 脚本来发起HTTP通信的代名词，也就是说，只要使用脚本发起通信，就可以叫做 AJAX 通信。

具体而言，AJAX 包括以下几个步骤：

1. 创建 XMLHttpRequest 实例
2. 发出 HTTP 请求
3. 接收服务器返回的数据
4. 更新网页数据

概括起来就是 AJAX 通过原生的 `XMLHttpRequest` 发送请求，

